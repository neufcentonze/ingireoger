<section class="promotions-wrapper">
  <div class="promotions-scroll-container fixed-width" id="promoScroll">
    <% const promos = [
      { label: "Offre d'inscription", title: "ðŸ’¸ Votre premier dÃ©pÃ´t est doublÃ© !", desc: "Votre 1er dÃ©pÃ´t doublÃ© jusquâ€™Ã  250â€¯â‚¬", img: "/images/vault.png" },
      { label: "Promotion", title: "ðŸ’¥ Surpasse les autres au classement", desc: "Jusqu'Ã  3 000 â‚¬ en jeu chaque semaine", img: "/images/trophee.png" },
      { label: "Tirage au sort", title: "ðŸŽ« Chaque mise peut tout changer", desc: "10 000 â‚¬ Ã  gagner chaque mois !", img: "/images/giveaway.png" },
    ]; %>

    <% promos.forEach(promo => { %>
      <div class="promo-card">
        <div class="promo-text">
          <span class="promo-label"><%= promo.label %></span>
          <h3><%= promo.title %></h3>
          <p><%= promo.desc %></p>
          <button class="promo-btn">Voir</button>
        </div>
        <div class="promo-img">
          <img src="<%= promo.img %>" alt="Promotion">
        </div>
      </div>
    <% }) %>
  </div>

  <!-- FlÃ¨ches -->
  <button class="arrow left" id="leftArrow">&#10094;</button>
  <button class="arrow right" id="rightArrow">&#10095;</button>
</section>

<script>
  const scrollContainer = document.getElementById('promoScroll');
  const leftArrow = document.getElementById('leftArrow');
  const rightArrow = document.getElementById('rightArrow');

  function getCardWidth() {
    const card = scrollContainer.querySelector('.promo-card');
    return card ? card.offsetWidth + 16 : 0;
  }

  function updateArrowVisibility() {
    const cardCount = scrollContainer.querySelectorAll('.promo-card').length;
    const screenWidth = window.innerWidth;
    const visibleCount = screenWidth > 768 ? 3 : 1;
    if (cardCount <= visibleCount) {
      leftArrow.style.display = "none";
      rightArrow.style.display = "none";
    } else {
      scrollContainer.parentElement.addEventListener("mouseenter", () => {
        leftArrow.style.display = "block";
        rightArrow.style.display = "block";
      });
      scrollContainer.parentElement.addEventListener("mouseleave", () => {
        leftArrow.style.display = "none";
        rightArrow.style.display = "none";
      });
    }
  }

  leftArrow.addEventListener('click', () => {
    scrollContainer.scrollBy({ left: -getCardWidth(), behavior: 'smooth' });
  });

  rightArrow.addEventListener('click', () => {
    scrollContainer.scrollBy({ left: getCardWidth(), behavior: 'smooth' });
  });

  window.addEventListener('resize', updateArrowVisibility);
  window.addEventListener('DOMContentLoaded', updateArrowVisibility);
</script>
