<aside class="sidebar <%= isMobile || sidebarCollapsed ? 'sidebar--collapsed' : '' %>">

  <% const categories = [
    { name: 'Portefeuille', icon: '/images/sidebar/portefeuille.png', link: '/wallet' },
    { name: 'Progression',  icon: '/images/sidebar/progression.png',  link: '/progression' },
    { name: 'Jeux',         icon: '/images/sidebar/jeux.png',         link: '/game' }
  ]; %>

  <% categories.forEach(cat => {
    const cleanId = cat.name.replace(/\s+/g, '').toLowerCase();
  %>

    <div class="sidebar-section">
      <a
        href="<%= (isMobile || sidebarCollapsed) ? cat.link : '#' %>"
        class="sidebar-toggle"
        data-id="<%= cleanId %>"
        onclick="<%= (!isMobile && !sidebarCollapsed) ? `toggleSidebarSection('${cleanId}')` : '' %>"
      >
        <div class="sidebar-toggle-left">
          <img src="<%= cat.icon %>" alt="<%= cat.name %>" class="sidebar-icon" />
          <% if (!sidebarCollapsed && !isMobile) { %>
            <span class="sidebar-label"><%= cat.name %></span>
          <% } %>
        </div>
        <% if (!sidebarCollapsed && !isMobile) { %>
          <span class="sidebar-arrow">â–¾</span>
        <% } %>
      </a>

      <% if (!sidebarCollapsed && !isMobile) { %>
        <div class="sidebar-submenu" id="submenu-<%= cleanId %>">
          <% if (sidebarPages && sidebarPages[cat.name]) { %>
            <% sidebarPages[cat.name].forEach(page => { %>
              <a href="/<%= cat.name.toLowerCase() %>/<%= page.route %>"><%= page.label %></a>
            <% }) %>
          <% } else { %>
            <p class="empty">Aucune page</p>
          <% } %>
        </div>
      <% } %>
    </div>

  <% }) %>

</aside>
